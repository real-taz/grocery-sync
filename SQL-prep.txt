

-- Products (The master list of items)
CREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    unit TEXT NOT NULL CHECK(unit IN ('weight', 'pieces')),
    product_group TEXT,
    barcode TEXT,
    picture_url TEXT
);

-- Grocery Lists
CREATE TABLE lists (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    due_date TEXT
);

-- List Items (Mapping products to lists with a status)
CREATE TABLE list_items (
    list_id INTEGER,
    product_id INTEGER,
    is_bought BOOLEAN DEFAULT 0,
    FOREIGN KEY(list_id) REFERENCES lists(id) ON DELETE CASCADE,
    FOREIGN KEY(product_id) REFERENCES products(id) ON DELETE CASCADE,
    PRIMARY KEY(list_id, product_id)
);